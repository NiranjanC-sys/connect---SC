import{r as s,e as $,f as T,h as P,P as F,i as O,c as H,u as K,j as e,S as U,m as v}from"./index-CJxbz0ez.js";import{S as Y}from"./send-D68FiZv7.js";function A(){const t=s.useRef(!1);return $(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function _(){const t=A(),[i,n]=s.useState(0),a=s.useCallback(()=>{t.current&&n(i+1)},[i]);return[s.useCallback(()=>T.postRender(a),[a]),i]}class q extends s.Component{getSnapshotBeforeUpdate(i){const n=this.props.childRef.current;if(n&&i.isPresent&&!this.props.isPresent){const a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function D({children:t,isPresent:i}){const n=s.useId(),a=s.useRef(null),y=s.useRef({width:0,height:0,top:0,left:0});return s.useInsertionEffect(()=>{const{width:c,height:p,top:m,left:b}=y.current;if(i||!a.current||!c||!p)return;a.current.dataset.motionPopId=n;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${p}px !important;
            top: ${m}px !important;
            left: ${b}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[i]),s.createElement(q,{isPresent:i,childRef:a,sizeRef:y},s.cloneElement(t,{ref:a}))}const I=({children:t,initial:i,isPresent:n,onExitComplete:a,custom:y,presenceAffectsLayout:c,mode:p})=>{const m=P(W),b=s.useId(),u=s.useMemo(()=>({id:b,initial:i,isPresent:n,custom:y,onExitComplete:o=>{m.set(o,!0);for(const d of m.values())if(!d)return;a&&a()},register:o=>(m.set(o,!1),()=>m.delete(o))}),c?void 0:[n]);return s.useMemo(()=>{m.forEach((o,d)=>m.set(d,!1))},[n]),s.useEffect(()=>{!n&&!m.size&&a&&a()},[n]),p==="popLayout"&&(t=s.createElement(D,{isPresent:n},t)),s.createElement(F.Provider,{value:u},t)};function W(){return new Map}function B(t){return s.useEffect(()=>()=>t(),[])}const w=t=>t.key||"";function V(t,i){t.forEach(n=>{const a=w(n);i.set(a,n)})}function G(t){const i=[];return s.Children.forEach(t,n=>{s.isValidElement(n)&&i.push(n)}),i}const R=({children:t,custom:i,initial:n=!0,onExitComplete:a,exitBeforeEnter:y,presenceAffectsLayout:c=!0,mode:p="sync"})=>{const m=s.useContext(O).forceRender||_()[0],b=A(),u=G(t);let o=u;const d=s.useRef(new Map).current,N=s.useRef(o),j=s.useRef(new Map).current,h=s.useRef(!0);if($(()=>{h.current=!1,V(u,j),N.current=o}),B(()=>{h.current=!0,j.clear(),d.clear()}),h.current)return s.createElement(s.Fragment,null,o.map(l=>s.createElement(I,{key:w(l),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:c,mode:p},l)));o=[...o];const r=N.current.map(w),g=u.map(w),x=r.length;for(let l=0;l<x;l++){const f=r[l];g.indexOf(f)===-1&&!d.has(f)&&d.set(f,void 0)}return p==="wait"&&d.size&&(o=[]),d.forEach((l,f)=>{if(g.indexOf(f)!==-1)return;const M=j.get(f);if(!M)return;const z=r.indexOf(f);let E=l;if(!E){const L=()=>{d.delete(f);const k=Array.from(j.keys()).filter(C=>!g.includes(C));if(k.forEach(C=>j.delete(C)),N.current=u.filter(C=>{const S=w(C);return S===f||k.includes(S)}),!d.size){if(b.current===!1)return;m(),a&&a()}};E=s.createElement(I,{key:w(M),isPresent:!1,onExitComplete:L,custom:i,presenceAffectsLayout:c,mode:p},M),d.set(f,E)}o.splice(z,0,E)}),o=o.map(l=>{const f=l.key;return d.has(f)?l:s.createElement(I,{key:w(l),isPresent:!0,presenceAffectsLayout:c,mode:p},l)}),s.createElement(s.Fragment,null,d.size?o:o.map(l=>s.cloneElement(l)))};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=H("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Z=()=>{const{user:t}=K(),[i,n]=s.useState([]),[a,y]=s.useState(null),[c,p]=s.useState(""),[m,b]=s.useState(!0),[u,o]=s.useState(!1),d=s.useRef(null);s.useEffect(()=>{setTimeout(()=>{const r=[{id:"1",user:{id:"2",username:"stellar_dreamer",avatar:"https://images.pexels.com/photos/415829/pexels-photo-415829.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2",online:!0},messages:[{id:"1",senderId:"2",text:"Hey, have you seen the new quantum computing breakthrough?",timestamp:"10:30 AM",read:!0},{id:"2",senderId:(t==null?void 0:t.id)||"1",text:"Not yet! Tell me more about it",timestamp:"10:32 AM",read:!0},{id:"3",senderId:"2",text:"They've managed to maintain quantum coherence for over 10 minutes!",timestamp:"10:33 AM",read:!0},{id:"4",senderId:"2",text:"This could revolutionize our neural network architecture",timestamp:"10:34 AM",read:!0},{id:"5",senderId:(t==null?void 0:t.id)||"1",text:"Wow! That's incredible. We should integrate this into our project",timestamp:"10:36 AM",read:!0}],unreadCount:0},{id:"2",user:{id:"3",username:"nebula_navigator",avatar:"https://images.pexels.com/photos/614810/pexels-photo-614810.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2",online:!1,lastSeen:"2h ago"},messages:[{id:"1",senderId:(t==null?void 0:t.id)||"1",text:"How's the AI project going?",timestamp:"Yesterday",read:!0},{id:"2",senderId:"3",text:"Making good progress! The neural network is learning faster than expected",timestamp:"Yesterday",read:!0},{id:"3",senderId:"3",text:"Can we meet to discuss the next phase?",timestamp:"9:45 AM",read:!1}],unreadCount:2},{id:"3",user:{id:"4",username:"quantum_coder",avatar:"https://images.pexels.com/photos/1222271/pexels-photo-1222271.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2",online:!0},messages:[{id:"1",senderId:"4",text:"Check out this new library I just published",timestamp:"2d ago",read:!0},{id:"2",senderId:(t==null?void 0:t.id)||"1",text:"Looks impressive! How's the performance?",timestamp:"2d ago",read:!0},{id:"3",senderId:"4",text:"30% faster than the previous version",timestamp:"2d ago",read:!0},{id:"4",senderId:"4",text:"40% less memory usage too!",timestamp:"Yesterday",read:!1}],unreadCount:1}];n(r),y(r[0].id),b(!1)},1e3)},[t]),s.useEffect(()=>{var r;(r=d.current)==null||r.scrollIntoView({behavior:"smooth"})},[a,i]);const N=r=>{if(r.preventDefault(),!c.trim()||!a)return;const g={id:`new-${Date.now()}`,senderId:(t==null?void 0:t.id)||"1",text:c,timestamp:"Just now",read:!1};n(i.map(x=>x.id===a?{...x,messages:[...x.messages,g]}:x)),p("")},j=r=>{y(r),o(!0),n(i.map(g=>g.id===r?{...g,messages:g.messages.map(x=>({...x,read:!0})),unreadCount:0}:g))},h=i.find(r=>r.id===a);return e.jsx("div",{className:"h-[calc(100vh-12rem)] bg-bg-secondary rounded-xl shadow-sm overflow-hidden",children:e.jsxs("div",{className:"flex h-full",children:[e.jsxs("div",{className:`w-full md:w-1/3 lg:w-1/4 border-r border-bg-tertiary overflow-hidden ${u?"hidden md:block":"block"}`,children:[e.jsxs("div",{className:"p-4 border-b border-bg-tertiary",children:[e.jsx("h2",{className:"text-xl font-bold text-text-primary mb-4",children:"Messages"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search conversations...",className:"w-full pl-10 pr-4 py-2 bg-bg-primary rounded-xl focus:outline-none focus:ring-1 focus:ring-primary"}),e.jsx(U,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-text-tertiary"})]})]}),e.jsx("div",{className:"overflow-y-auto h-[calc(100%-80px)]",children:m?e.jsx("div",{className:"flex justify-center items-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsx(R,{children:i.map(r=>e.jsxs(v.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},className:`
                      p-4 flex items-center space-x-3 cursor-pointer transition-colors
                      ${a===r.id?"bg-bg-tertiary":"hover:bg-bg-tertiary/50"}
                    `,onClick:()=>j(r.id),children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:r.user.avatar,alt:r.user.username,className:"w-12 h-12 rounded-full object-cover"}),r.user.online&&e.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-success rounded-full border-2 border-bg-secondary"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"font-medium text-text-primary truncate",children:r.user.username}),e.jsx("span",{className:"text-xs text-text-tertiary",children:r.messages.length>0?r.messages[r.messages.length-1].timestamp:""})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"text-sm text-text-secondary truncate",children:r.messages.length>0?r.messages[r.messages.length-1].text:""}),r.unreadCount>0&&e.jsx(v.span,{initial:{scale:0},animate:{scale:1},className:"bg-primary text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:r.unreadCount})]})]})]},r.id))})})]}),e.jsx(R,{mode:"wait",children:e.jsx(v.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:`w-full md:w-2/3 lg:w-3/4 flex flex-col ${u?"flex":"hidden md:flex"}`,children:h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 border-b border-bg-tertiary flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{className:"md:hidden p-1 rounded-full hover:bg-bg-tertiary",onClick:()=>o(!1),children:e.jsx(J,{className:"w-5 h-5 text-text-primary"})}),e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:h.user.avatar,alt:h.user.username,className:"w-10 h-10 rounded-full object-cover"}),h.user.online&&e.jsx("div",{className:"absolute bottom-0 right-0 w-2.5 h-2.5 bg-success rounded-full border-2 border-bg-secondary"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-text-primary",children:h.user.username}),e.jsx("p",{className:"text-xs text-text-tertiary",children:h.user.online?"Online":`Last seen ${h.user.lastSeen}`})]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.jsx(R,{children:h.messages.map((r,g)=>{const x=r.senderId===(t==null?void 0:t.id);return e.jsx(v.div,{className:`flex ${x?"justify-end":"justify-start"}`,initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},children:e.jsxs("div",{className:`
                            max-w-[75%] rounded-xl p-3
                            ${x?"bg-primary text-white rounded-br-none":"bg-bg-tertiary text-text-primary rounded-bl-none"}
                          `,children:[e.jsx("p",{children:r.text}),e.jsxs("div",{className:`text-xs mt-1 flex items-center justify-end space-x-1
                              ${x?"text-primary-light":"text-text-tertiary"}
                            `,children:[e.jsx("span",{children:r.timestamp}),x&&e.jsx(v.div,{initial:{scale:0},animate:{scale:1},className:`w-4 h-4 ${r.read?"text-primary-light":"text-primary-dark"}`,children:"✓"})]})]})},r.id)})}),e.jsx("div",{ref:d})]}),e.jsx("div",{className:"p-4 border-t border-bg-tertiary",children:e.jsxs("form",{onSubmit:N,className:"flex space-x-3",children:[e.jsx("input",{type:"text",value:c,onChange:r=>p(r.target.value),placeholder:"Type your message...",className:"flex-1 py-3 px-4 bg-bg-primary rounded-xl focus:outline-none focus:ring-1 focus:ring-primary"}),e.jsx(v.button,{type:"submit",disabled:!c.trim(),whileTap:{scale:.95},className:`
                        btn btn-primary rounded-xl px-4
                        ${c.trim()?"":"opacity-50 cursor-not-allowed"}
                      `,children:e.jsx(Y,{className:"w-5 h-5"})})]})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-bg-tertiary mx-auto flex items-center justify-center mb-4",children:e.jsx(MessageCircle,{className:"w-10 h-10 text-text-tertiary"})}),e.jsx("h3",{className:"text-lg font-medium text-text-primary",children:"Your Messages"}),e.jsx("p",{className:"text-text-tertiary mt-2",children:"Select a conversation to start chatting"})]})})},a)})]})})};export{Z as default};
